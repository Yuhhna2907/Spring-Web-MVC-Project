<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>NASA Picture</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-4">
    <img id="img-of-the-day" class="img-fluid rounded shadow">

    <script>
        fetch("https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY")
            .then(r => r.json())
            .then(d => document.getElementById("img-of-the-day").src = d.url);
    </script>

    <form th:action="@{/comment}" th:object="${feedback}" method="post" class="mt-4">
        <input th:field="*{author}" class="form-control mb-2" placeholder="Author">
        <textarea th:field="*{comment}" class="form-control mb-2"></textarea>

        <select th:field="*{rating}" class="form-select mb-2">
            <option th:value="1">1</option>
            <option th:value="2">2</option>
            <option th:value="3">3</option>
            <option th:value="4">4</option>
            <option th:value="5">5</option>
        </select>

        <button class="btn btn-primary">Send</button>
    </form>

    <h4 class="mt-4">Today's Feedback</h4>

    <div th:each="f : ${list}" class="card mt-2">
        <div class="card-body">
            <strong th:text="${f.author}"></strong>
            ⭐ <span th:text="${f.rating}"></span>
            <p th:text="${f.comment}"></p>

            <a th:href="@{/like/{id}(id=${f.id})}"
               class="btn btn-outline-danger btn-sm">
                ❤️ <span th:text="${f.likes}"></span>
            </a>
        </div>
    </div>
</div>

</body>
</html>
